# xswl-youdidit

ä¸€ä¸ªé«˜æ€§èƒ½çš„ä»»åŠ¡ä»£ç†å¹³å°åº“ï¼Œé‡‡ç”¨èµé‡‘æ¦œæ¸¸æˆæœºåˆ¶ï¼Œæ”¯æŒå¤šè§’è‰²ä»»åŠ¡äº¤äº’ä¸å®æ—¶ç›‘æ§ã€‚

## ğŸ“– ç›®å½•

- [ğŸ“‹ é¡¹ç›®ç®€ä»‹](#-é¡¹ç›®ç®€ä»‹)
- [ğŸ› ï¸ æŠ€æœ¯æ ˆ](#ï¸-æŠ€æœ¯æ ˆ)
- [âœ¨ æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§)
- [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [â˜ï¸ GitHub Codespaces](#-åœ¨-codespaces-ä¸­å¿«é€Ÿå¼€å§‹)
- [ğŸ—ï¸ é¡¹ç›®ç»“æ„](#ï¸-é¡¹ç›®ç»“æ„)
- [ğŸ“– æ ¸å¿ƒæ¦‚å¿µ](#-æ ¸å¿ƒæ¦‚å¿µ)
- [ğŸ’¡ ä¸»è¦ç‰¹æ€§è¯¦è§£](#-ä¸»è¦ç‰¹æ€§è¯¦è§£)
- [ğŸ” çº¿ç¨‹å®‰å…¨è®¾è®¡](#-çº¿ç¨‹å®‰å…¨è®¾è®¡)
- [ğŸ” ä¿¡å·æ§½æœºåˆ¶](#-ä¿¡å·æ§½æœºåˆ¶è¯¦è§£)
- [ğŸ“Š ç›‘æ§ä¸å¯è§†åŒ–](#-ç›‘æ§ä¸å¯è§†åŒ–)
- [ğŸ“¦ ä¾èµ–åº“](#-ä¾èµ–åº“)
- [ğŸ“ ä½¿ç”¨ç¤ºä¾‹](#-ä½¿ç”¨ç¤ºä¾‹)
- [ğŸ¤ è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
- [ğŸ“„ è®¸å¯è¯](#-è®¸å¯è¯)

---

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

**xswl-youdidit** æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ä»»åŠ¡å¤„ç†å¹³å°ï¼Œæ¨¡æ‹ŸçœŸå®ä¸–ç•Œçš„èµé‡‘æ¦œç³»ç»Ÿã€‚é€šè¿‡æ¸¸æˆåŒ–çš„ä»»åŠ¡äº¤äº’æœºåˆ¶ï¼Œæ”¯æŒä»»åŠ¡å‘å¸ƒè€…ã€ç”³é¢†è€…ã€åˆ†æ´¾è€…ç­‰å¤šè§’è‰²åä½œï¼Œå®ç°é«˜æ•ˆçš„å¼‚æ­¥ä»»åŠ¡å¤„ç†ä¸çŠ¶æ€è¿½è¸ªã€‚

### è®¾è®¡ç†å¿µ

- **æ¸¸æˆåŒ–æœºåˆ¶**ï¼šå€Ÿé‰´èµé‡‘æ¦œæ¸¸æˆæ¨¡å¼ï¼Œä½¿ä»»åŠ¡äº¤äº’æ›´åŠ ç›´è§‚æœ‰è¶£
- **å®æ—¶ç›‘æ§**ï¼šå®Œæ•´çš„æ—¥å¿—è®°å½•å’Œ Web å¯è§†åŒ–å·¥å…·ï¼Œæ”¯æŒæ—¶é—´å›æ”¾åŠŸèƒ½
- **é«˜æ€§èƒ½å¹¶å‘**ï¼šæ”¯æŒå¤§è§„æ¨¡å¹¶å‘ä»»åŠ¡å¤„ç†å’ŒåŠ¨æ€è°ƒåº¦

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **ç¼–ç¨‹è¯­è¨€**: C++11
- **ç¼–è¯‘å·¥å…·**: CMake
- **ç¼–è¯‘å™¨**: MinGW
- **ä¾èµ–åº“**: tl::optionalã€tl::expected ç­‰ç¬¬ä¸‰æ–¹åº“

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ“¤ ä»»åŠ¡å‘å¸ƒä¸ç”³é¢†
- ä»»åŠ¡å‘å¸ƒè€…å¯ä»¥å‘å¸ƒä»»åŠ¡åˆ°å¹³å°
- æ”¯æŒç­‰å¾…ä»»åŠ¡ç”³é¢†ç»“æœã€å¤„ç†ç»“æœã€çŠ¶æ€åé¦ˆ
- ç”³é¢†è€…è´Ÿè´£å¤„ç†ä»»åŠ¡å¹¶åé¦ˆæ‰§è¡ŒçŠ¶æ€
- æ”¯æŒä»»åŠ¡åˆ†æ´¾ï¼Œå‘å¸ƒè€…å¯æŒ‡å®šç‰¹å®šå¤„ç†è€…

### âš¡ å¹¶å‘ä¸è°ƒåº¦
- æ”¯æŒä»»æ„å¤šä¸ªä»»åŠ¡ç”³é¢†è€…åŒæ—¶å¤„ç†å„ç§ä»»åŠ¡
- æ”¯æŒè®¾ç½®å’Œå®æ—¶è°ƒæ•´ä»»åŠ¡ä¼˜å…ˆçº§
- æ”¯æŒå¤šè§’è‰²å¹¶å‘äº¤äº’

### ğŸ›ï¸ æ¶æ„è®¾è®¡
- é‡‡ç”¨ä¿¡å·æ§½æœºåˆ¶ï¼ˆä½¿ç”¨ [xswl-signals](https://github.com/Wang-Jianwei/xswl-signals.git) åº“ï¼‰
- æ¸¸æˆåŒ–è®¾è®¡é£æ ¼ï¼Œç±»ä¼¼çœŸå®ä¸–ç•Œçš„èµé‡‘æ¦œæ¨¡å¼
- ä»£ç æ¥å£å‘½åè´´è¿‘èµé‡‘æ¦œæ¸¸æˆè§’è‰²

### ğŸ“Š ç›‘æ§ä¸æ—¥å¿—
- è®°å½•å„è§’è‰²äº¤äº’æ—¥å¿—å’ŒçŠ¶æ€åˆ°çŠ¶æ€æ–‡ä»¶
- æä¾› Web å·¥å…·å®æ—¶æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
- æ”¯æŒæ—¶é—´å›æ”¾åŠŸèƒ½ï¼Œå¦‚åŒæ¸¸æˆä»¿çœŸç•Œé¢

## ğŸš€ å¿«é€Ÿå¼€å§‹

> **ğŸ“Œ åœ¨ GitHub Codespaces ä¸­ï¼Ÿ** 
> æŸ¥çœ‹ [Codespaces ç”¨æˆ·æŒ‡å—](docs/ops/CODESPACES_GUIDE.md) äº†è§£å¦‚ä½•åœ¨äº‘ç«¯è¿è¡Œå’Œè®¿é—® Web ä»ªè¡¨æ¿ï¼

### å‰ç½®è¦æ±‚

- C++11 æˆ–æ›´é«˜ç‰ˆæœ¬
- CMake 3.10+
- GCC/Clang ç¼–è¯‘å™¨ï¼ˆæˆ–åœ¨ Windows ä¸Šä½¿ç”¨ MinGWï¼‰
- Python 3ï¼ˆå¯é€‰ï¼Œç”¨äºæµ‹è¯•ç»“æœåˆ†æï¼‰

### æ„å»ºé¡¹ç›®

```bash
# å…‹éš†ä»“åº“ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
git clone https://github.com/Wang-Jianwei/xswl-youdidit.git
cd xswl-youdidit

# åˆå§‹åŒ–å­æ¨¡å—ï¼ˆä¸‹è½½ xswl-signalsï¼‰
git submodule update --init --recursive  # åˆå§‹åŒ–å­æ¨¡å—ï¼ˆä¸‹è½½ xswl-signalsï¼‰
```

### ä½¿ç”¨æ„å»ºè„šæœ¬ï¼ˆæ¨èï¼‰

é¡¹ç›®æä¾›äº†ä¾¿æ·çš„æ„å»ºæµ‹è¯•è„šæœ¬ï¼š

#### å¿«é€Ÿæµ‹è¯•ï¼ˆæœ€å¿«ï¼‰
```bash
./quick_test.sh
```
å¿«é€Ÿç¼–è¯‘å¹¶è¿è¡Œæ ¸å¿ƒæµ‹è¯•å¥—ä»¶ã€‚

#### å®Œæ•´æ„å»ºä¸æµ‹è¯•
```bash
./build_and_test.sh [é€‰é¡¹]
```

**é€‰é¡¹è¯´æ˜ï¼š**
- `--help` - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
- `--clean` - æ¸…ç©ºæ„å»ºç›®å½•å¹¶é‡æ–°æ„å»º
- `--unit` - ä»…è¿è¡Œå•å…ƒæµ‹è¯•
- `--integration` - ä»…è¿è¡Œé›†æˆæµ‹è¯•
- `--examples` - æ„å»ºå¹¶è¿è¡Œç¤ºä¾‹ç¨‹åº
- `--all` - è¿è¡Œæ‰€æœ‰æµ‹è¯•ä¸ç¤ºä¾‹
- `-j N` - æŒ‡å®šå¹¶è¡Œæ„å»ºæ•°ï¼ˆé»˜è®¤ä¸º CPU æ ¸å¿ƒæ•°ï¼‰

**ç¤ºä¾‹ï¼š**
```bash
# æ¸…ç©ºåå®Œæ•´æ„å»ºä¸æµ‹è¯•
./build_and_test.sh --clean --all

# ä»…è¿è¡Œå•å…ƒæµ‹è¯•
./build_and_test.sh --unit

# ä½¿ç”¨ 4 ä¸ªçº¿ç¨‹ç¼–è¯‘
./build_and_test.sh -j 4
```

#### æ¸…ç†æ„å»ºäº§ç‰©
```bash
# äº¤äº’å¼æ¸…ç†ï¼š
./build_and_test.sh --clean
# éäº¤äº’æˆ– CI ç¯å¢ƒå¼ºåˆ¶æ¸…ç†ï¼š
FORCE_CLEAN=1 ./build_and_test.sh --clean
```

#### è¯¦ç»†çš„æµ‹è¯•åˆ†æï¼ˆPythonï¼‰
```bash
python3 analyze_tests.py [æ„å»ºç›®å½•]
```
è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶å¹¶ç”Ÿæˆ JSON æ ¼å¼çš„è¯¦ç»†æŠ¥å‘Šã€‚

### Windows PowerShell æ„å»ºè„šæœ¬

æœ¬é¡¹ç›®åŒæ—¶æä¾›äº†é€‚ç”¨äº Windows çš„ PowerShell è„šæœ¬ï¼ˆå»ºè®®ä½¿ç”¨ PowerShell 7+ï¼‰ã€‚è„šæœ¬æ”¯æŒæ¸…ç†ã€æ„å»ºã€è¿è¡Œæµ‹è¯•ä¸ç¤ºä¾‹ï¼Œä¸”ä¸ºå¸¸è§ Windows åœºæ™¯åšäº†å…¼å®¹å¤„ç†ã€‚

åŸºæœ¬ç”¨æ³•ï¼š

```powershell
# æŸ¥çœ‹å¸®åŠ©
.\build_and_test.ps1 -Help

# æ¸…ç©ºæ„å»ºç›®å½•åå®Œæ•´æ„å»ºä¸æµ‹è¯•ï¼ˆç¤ºä¾‹ï¼‰
.\build_and_test.ps1 -Clean -All

# ä»…è¿è¡Œå•å…ƒæµ‹è¯•
.\build_and_test.ps1 -Unit

# ä»…æ„å»ºå¹¶è¿è¡Œç¤ºä¾‹
.\build_and_test.ps1 -Examples

# æŒ‡å®šå¹¶è¡Œæ•°
.\build_and_test.ps1 -J 4
```

è¿è¡Œç¤ºä¾‹ä¸æµ‹è¯•ï¼ˆå¸¸ç”¨æ“ä½œï¼‰

- ä½¿ç”¨è„šæœ¬ï¼ˆæ¨èï¼‰ï¼š
  - æ„å»ºå¹¶è¿è¡Œæ‰€æœ‰ç¤ºä¾‹ï¼ˆå« Web ç¤ºä¾‹éœ€ä½¿ç”¨ `-ForceWeb` æˆ–è®¾ç½®ç¯å¢ƒå˜é‡ï¼‰ï¼š
    `.\build_and_test.ps1 -Examples -ForceWeb`
  - æ„å»ºå¹¶è¿è¡Œæµ‹è¯•ï¼š
    `.\build_and_test.ps1 -Unit`

- æ‰‹åŠ¨æ„å»ºï¼ˆä½¿ç”¨ Visual Studio / MSVCï¼‰ï¼š
  - æ‰“å¼€â€œDeveloper PowerShell for VSâ€æˆ–ç›¸åº”çš„å¼€å‘è€…å‘½ä»¤æç¤ºç¬¦ï¼Œç„¶åæ‰§è¡Œï¼š
    ```powershell
    mkdir build; cd build
    cmake .. -DCMAKE_BUILD_TYPE=Release
    cmake --build . --config Release -j 4
    ctest -C Release --output-on-failure
    ```

- æ‰‹åŠ¨æ„å»ºï¼ˆä½¿ç”¨ MinGW / Ninjaï¼‰ï¼š
  - åœ¨ PowerShell ä¸­ï¼ˆç¡®ä¿ MinGW/Ninja åœ¨ PATHï¼‰æ‰§è¡Œï¼š
    ```powershell
    mkdir build; cd build
    cmake -G "Ninja" .. -DCMAKE_BUILD_TYPE=Release
    ninja -j 4
    ctest --output-on-failure
    ```

è¿è¡Œæ„å»ºäº§ç‰©ï¼š

- å¯ç›´æ¥è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š
  ```powershell
  .\build\examples\easy-example_basic_usage.exe
  .\build\examples\easy-example_perf_monitor.exe 8000 5 "5-5" perf_report.html 50 100000 2000 500000 "A,B,C,D,E"
  ```
- æµ‹è¯•å¯æ‰§è¡Œæ–‡ä»¶ä½äº `build\tests\`ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è¿è¡Œè¿™äº› exe æˆ–ä½¿ç”¨ `ctest`ã€‚

ç¼–ç ä¸æƒé™æ³¨æ„ï¼š
> âš ï¸ **æ³¨æ„ï¼š** è‹¥è„šæœ¬å‡ºç°ä¹±ç æˆ–è§£æé”™è¯¯ï¼Œè¯·ç¡®ä¿ `build_and_test.ps1` æ–‡ä»¶ç¼–ç ä¸º UTF-8 (å¸¦ BOM) æˆ– UTF-16 LE (Unicode)ã€‚å¯ç”¨ `tools/convert_encoding.ps1` è„šæœ¬å®‰å…¨è½¬æ¢ç¼–ç ã€‚
> æ‰§è¡Œè„šæœ¬æ—¶ï¼Œè‹¥é‡åˆ°æ‰§è¡Œç­–ç•¥é™åˆ¶ï¼Œå¯åœ¨å…·æœ‰ç®¡ç†å‘˜æƒé™çš„ PowerShell ä¸­ä¸´æ—¶è®¾ç½®ï¼ˆä»…å½“å‰ä¼šè¯ï¼‰ï¼š
> `Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope Process`ã€‚

### æ‰‹åŠ¨æ„å»ºä¸æµ‹è¯•

å¦‚æœæ‚¨æ›´å€¾å‘äºæ‰‹åŠ¨æ“ä½œï¼š

```bash
# åˆ›å»ºæ„å»ºç›®å½•
mkdir build
cd build

# é…ç½® CMakeï¼ˆå¯ç”¨ Web å­å·¥ç¨‹ï¼‰
cmake .. -DBUILD_WEB=ON

# å¦‚æœéœ€è¦æ„å»º Web çš„ç¤ºä¾‹æˆ–æµ‹è¯•ï¼ˆåœ¨ Windows ä¸‹é»˜è®¤å…³é—­ï¼‰
# cmake .. -DBUILD_WEB=ON -DBUILD_WEB_EXAMPLES=ON -DBUILD_WEB_TESTS=ON

# æŒ‡å®šæ„å»ºç±»å‹ï¼ˆå•é…ç½®ç”Ÿæˆå™¨ï¼‰
# cmake .. -DCMAKE_BUILD_TYPE=Release

# ç¼–è¯‘ï¼ˆä½¿ç”¨å¤šæ ¸åŠ é€Ÿï¼‰
make -j$(nproc)

# è¿è¡Œå•å…ƒæµ‹è¯•ï¼ˆæ³¨æ„ï¼šåœ¨æŸäº› Windows å·¥å…·é“¾ä¸‹ï¼ŒWeb æµ‹è¯•/ç¤ºä¾‹å¯èƒ½é»˜è®¤æœªæ„å»ºï¼‰
./tests/easy-test_types
./tests/easy-test_task
./tests/easy-test_claimer
./tests/easy-test_task_platform
# å¦‚æœå·²å¯ç”¨ Web å­å·¥ç¨‹å¹¶æ„å»ºæµ‹è¯•ï¼š
# ./tests/easy-test_web

# è¿è¡Œé›†æˆæµ‹è¯•
./tests/easy-integration_test_workflow
# å¦‚æœå¯ç”¨äº† Web é›†æˆæµ‹è¯•ï¼š
# ./tests/easy-integration_test_web_api

# è¿è¡Œç¤ºä¾‹
./examples/easy-example_basic_usage
./examples/easy-example_multi_claimer
# Web ç¤ºä¾‹ä½äº web/examples/ï¼Œéœ€å¯ç”¨ BUILD_WEB_EXAMPLES
# ./web/examples/easy-example_web_demo

# æˆ–ä½¿ç”¨ CTest è¿è¡Œæ‰€æœ‰æµ‹è¯•
ctest --output-on-failure
```

æ³¨æ„ï¼šå¦‚æœä½¿ç”¨ä»“åº“æä¾›çš„ Windows è„šæœ¬ `build_and_test.ps1`ï¼Œå¯ä»¥å¦‚ä¸‹å¼ºåˆ¶æ„å»º Web æˆ–æŒ‡å®šæ„å»ºç±»å‹ï¼š

```powershell
# å¼ºåˆ¶æ„å»º Webï¼ˆé»˜è®¤åœ¨ä¸å…¼å®¹å·¥å…·é“¾ä¸Šä¼šè·³è¿‡ï¼‰
.\build_and_test.ps1 -ForceWeb
# æˆ–é€šè¿‡ç¯å¢ƒå˜é‡
$env:FORCE_BUILD_WEB = '1'; .\build_and_test.ps1

# æŒ‡å®šæ„å»ºç±»å‹ï¼ˆDebug / Release / RelWithDebInfo / MinSizeRelï¼‰
.\build_and_test.ps1 -BuildType Debug
```

**ç¼–è¯‘è¦æ±‚**:
- CMake 3.10+
- C++11 ç¼–è¯‘å™¨ï¼ˆGCC 4.8+, Clang 3.4+, MSVC 2015+, MinGWï¼‰
- Gitï¼ˆç”¨äºä¸‹è½½ submoduleï¼‰

## â˜ï¸ åœ¨ Codespaces ä¸­å¿«é€Ÿå¼€å§‹

å¦‚æœæ‚¨åœ¨ GitHub Codespaces ä¸­å·¥ä½œï¼Œå¯ç›´æ¥è¿è¡Œå¹¶è®¿é—® Web ä»ªè¡¨æ¿ï¼ˆDashboardï¼‰ï¼

```bash
# å¯åŠ¨ Web ä»ªè¡¨æ¿æ¼”ç¤ºï¼ˆå¸¦å‹å¥½çš„ UI æç¤ºï¼‰
./run_web_demo.sh

# ç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€
# - æœ¬åœ°ï¼šhttp://localhost:8080
# - Codespacesï¼šä½¿ç”¨ Ports è§†å›¾ä¸­çš„ç«¯å£è½¬å‘é“¾æ¥
```

è¯¦è§ [Codespaces ç”¨æˆ·æŒ‡å—](docs/ops/CODESPACES_GUIDE.md)ï¼Œäº†è§£ï¼š
- ğŸ“º å¦‚ä½•è®¿é—® Web ä»ªè¡¨æ¿
- ğŸ”Œ ç«¯å£è½¬å‘é…ç½®
- ğŸ› å¸¸è§é—®é¢˜æ’é™¤
- ğŸ“¡ REST API ä½¿ç”¨

### åŸºæœ¬ä½¿ç”¨æµç¨‹

1. **å‘å¸ƒä»»åŠ¡**ï¼šä»»åŠ¡å‘å¸ƒè€…åˆ›å»ºä»»åŠ¡å¹¶æäº¤åˆ°å¹³å°
2. **ç”³é¢†ä»»åŠ¡**ï¼šå¤„ç†è€…æŸ¥çœ‹å¹¶ç”³é¢†åˆé€‚çš„ä»»åŠ¡
3. **æ‰§è¡Œå¤„ç†**ï¼šç”³é¢†è€…å¤„ç†ä»»åŠ¡å¹¶åé¦ˆçŠ¶æ€
4. **ç›‘æ§æŸ¥çœ‹**ï¼šé€šè¿‡ Web å·¥å…·å®æ—¶ç›‘æ§ä»»åŠ¡è¿›å±•å’Œç³»ç»ŸçŠ¶æ€

### è®¾è®¡æ¨¡å¼

é‡‡ç”¨ç°ä»£ C++ è®¾è®¡æ¨¡å¼ï¼š

- **Fluent API**ï¼šé“¾å¼è°ƒç”¨ï¼Œæé«˜ä»£ç å¯è¯»æ€§
- **æ™ºèƒ½æŒ‡é’ˆ**ï¼šè‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œé¿å…å†…å­˜æ³„æ¼
- **å‡½æ•°å¼å›è°ƒ**ï¼šä½¿ç”¨ Lambda è¡¨è¾¾å¼å¤„ç†äº‹ä»¶
- **Result ç±»å‹**ï¼šä½¿ç”¨ `tl::expected` è¿›è¡Œä¼˜é›…çš„é”™è¯¯å¤„ç†

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
xswl-youdidit/
â”œâ”€â”€ include/          # å¤´æ–‡ä»¶
â”œâ”€â”€ src/              # æºä»£ç å®ç°
â”œâ”€â”€ tests/            # æµ‹è¯•ä»£ç 
â”œâ”€â”€ web/              # Web ç›‘æ§å·¥å…·
â”œâ”€â”€ CMakeLists.txt    # æ„å»ºé…ç½®
â””â”€â”€ README.md         # æœ¬æ–‡ä»¶
```

## ğŸ“– æ ¸å¿ƒæ¦‚å¿µ

ç®€çŸ­è¯´æ˜ï¼š`xswl-youdidit` çš„æ ¸å¿ƒæ¦‚å¿µï¼ˆä»»åŠ¡æ¨¡å‹ã€è§’è‰²ã€ç”Ÿå‘½å‘¨æœŸã€çº¿ç¨‹å®‰å…¨ä¸ä¿¡å·æ§½è¯­ä¹‰ç­‰ï¼‰å·²ç§»è‡³æ–‡æ¡£ç›®å½•ä»¥ä¿æŒæœ¬ README ç²¾ç‚¼ã€‚

- è¯¦ç»†è®¾è®¡ä¸æ¦‚å¿µè¯´æ˜ï¼š`docs/architecture/CONCEPTS.md`ï¼ˆåŒ…å«çŠ¶æ€è½¬æ¢å›¾ã€çº¿ç¨‹å®‰å…¨ç»†åˆ™ä¸ä¿¡å·è¯­ä¹‰ï¼‰
- ä½¿ç”¨ç¤ºä¾‹ä¸ä»£ç ç‰‡æ®µï¼š`docs/usage.md`
- API å‚è€ƒï¼š`docs/api/API.md`

è¯·åœ¨ç›¸åº”æ–‡æ¡£ä¸­æŸ¥é˜…å®ç°ç»†èŠ‚ã€ç¤ºä¾‹ä»£ç ä¸æœ€ä½³å®è·µã€‚
[å¼€å‘è€…ç¤ºä¾‹å·²ç§»è‡³ `docs/developer/DEVELOPER_GUIDE.md`ï¼ˆå¼€å‘è€…æŒ‡å—ï¼‰ã€‚]

æœ‰å…³è®¾è®¡ç¤ºä¾‹å·²ç§»è‡³ `docs/developer/DEVELOPER_GUIDE.md`ï¼ˆç¤ºä¾‹ä¸å®ç°è¯´æ˜ï¼‰ã€‚

### ä»»åŠ¡å®šä¹‰

ä»»åŠ¡ï¼ˆTaskï¼‰æ˜¯å¹³å°çš„æ ¸å¿ƒå®ä½“ï¼Œä»£è¡¨éœ€è¦å¤„ç†çš„å·¥ä½œå•å…ƒã€‚

> ğŸ“š **å®Œæ•´ API å®šä¹‰è¯·å‚é˜… [API.md](docs/api/API.md#ä»»åŠ¡ç±»-task)**

#### æ ¸å¿ƒå±æ€§æ¦‚è§ˆ

| å±æ€§åˆ†ç±» | ä¸»è¦å±æ€§ | è¯´æ˜ |
|---------|---------|------|
| **åŸºæœ¬ä¿¡æ¯** | `id`, `title`, `description` | ä»»åŠ¡æ ‡è¯†å’Œæè¿° |
| **è°ƒåº¦å±æ€§** | `priority`, `category`, `tags` | ç”¨äºä»»åŠ¡åˆ†ç±»å’Œä¼˜å…ˆçº§è°ƒåº¦ |
| **è§’è‰²å…³ç³»** | `publisher_id`, `claimer_id`, `required_role` | å‘å¸ƒè€…å’Œç”³é¢†è€…å…³ç³» |
| **çŠ¶æ€è¿½è¸ª** | `status`, `progress` | ä»»åŠ¡å½“å‰çŠ¶æ€å’Œè¿›åº¦ |
| **æ—¶é—´ä¿¡æ¯** | `created_at`, `deadline`, `completed_at` | æ—¶é—´èŠ‚ç‚¹è®°å½• |
| **å¥–åŠ±æœºåˆ¶** | `reward_points`, `reward_type` | èµé‡‘æ¦œç‰¹è‰² |

#### å…³é”®è®¾è®¡ï¼šä¸šåŠ¡é€»è¾‘æºå¸¦

ä»»åŠ¡æºå¸¦ `TaskHandler` å¤„ç†å‡½æ•°ï¼Œç”±å‘å¸ƒè€…å®šä¹‰å…·ä½“ä¸šåŠ¡é€»è¾‘ï¼š

```cpp
using TaskHandler = std::function<TaskResult(
    Task &task,              // ä»»åŠ¡å¯¹è±¡æœ¬èº«ï¼ˆç”¨äºæ›´æ–°è¿›åº¦ç­‰ï¼‰
    const std::string &input // è¾“å…¥æ•°æ®ï¼ˆæ ¼å¼ç”±ç”¨æˆ·å®šä¹‰ï¼‰
)>;
```

**æ³¨æ„**ï¼š`TaskHandler` ç°åœ¨ç›´æ¥è¿”å› `TaskResult`ï¼›è‹¥å¤„ç†å¤±è´¥ï¼Œè¯·è¿”å› `TaskResult::Failure(Error(...))`ï¼Œä¾‹å¦‚ï¼š

```cpp
return TaskResult::Failure(Error("å¤„ç†å¤±è´¥åŸå› ", ErrorCode::TASK_EXECUTION_FAILED));
```

> **è®¾è®¡è¯´æ˜**ï¼š`input` å‚æ•°ä½¿ç”¨ç®€å•çš„ `std::string`ï¼Œç”¨æˆ·å¯æ ¹æ®éœ€è¦ä¼ å…¥æ–‡ä»¶è·¯å¾„ã€JSON å­—ç¬¦ä¸²ã€é…ç½®æ–‡æœ¬ç­‰ä»»æ„æ ¼å¼ï¼Œåœ¨ handler å†…è‡ªè¡Œè§£æã€‚

æœ‰å…³å¼€å‘è€…/å®ç°ç»†èŠ‚ï¼ˆç¤ºä¾‹ä»£ç ã€çŠ¶æ€æœºã€è§’è‰²æ¥å£ã€Claimer API ç­‰ï¼‰å·²ç§»è‡³ï¼š

- `docs/developer/DEVELOPER_GUIDE.md`ï¼ˆå¼€å‘è€…æŒ‡å—ï¼ŒåŒ…å«ç¤ºä¾‹ä¸ API æ‘˜è¦ï¼‰
- `docs/usage.md`ï¼ˆä½¿ç”¨ç¤ºä¾‹ï¼‰
- `docs/architecture/CONCEPTS.md`ï¼ˆè®¾è®¡ç»†åˆ™ä¸çŠ¶æ€å›¾ï¼‰

è¯·æ ¹æ®ä½ çš„èº«ä»½ï¼ˆä½¿ç”¨è€… / å¼€å‘è€…ï¼‰é€‰æ‹©åˆé€‚çš„æ–‡æ¡£ä»¥è·å–è¯¦ç»†ä¿¡æ¯ã€‚

## ğŸ’¡ ä¸»è¦ç‰¹æ€§è¯¦è§£

### å¤šä¼˜å…ˆçº§è°ƒåº¦

æ”¯æŒåŠ¨æ€è®¾ç½®å’Œè°ƒæ•´ä»»åŠ¡ä¼˜å…ˆçº§ï¼Œç¡®ä¿é«˜ä¼˜å…ˆçº§ä»»åŠ¡ä¼˜å…ˆå¤„ç†ï¼š

- **å®æ—¶è°ƒæ•´**ï¼šå¯åœ¨ä»»åŠ¡å¤„ç†å‰åè°ƒæ•´ä¼˜å…ˆçº§
- **å…¬å¹³è°ƒåº¦**ï¼šç›¸åŒä¼˜å…ˆçº§ä»»åŠ¡æŒ‰ FIFO å¤„ç†
- **ä¼˜å…ˆçº§èŒƒå›´**ï¼šæ”¯æŒè‡ªå®šä¹‰ä¼˜å…ˆçº§æ•°å€¼èŒƒå›´

### å¹¶å‘å¤„ç†

- æ”¯æŒå¤šä¸ªç”³é¢†è€…åŒæ—¶å¤„ç†ä¸åŒä»»åŠ¡
- çº¿ç¨‹å®‰å…¨çš„ä»»åŠ¡åˆ†é…å’ŒçŠ¶æ€åŒæ­¥
- è‡ªåŠ¨å¤„ç†å¹¶å‘å†²çªå’Œèµ„æºç«äº‰

## ğŸ” çº¿ç¨‹å®‰å…¨è®¾è®¡

ç®€è¦è¯´æ˜ï¼šä»“åº“å®æ–½ç»†ç²’åº¦é”ã€è¯»å†™åˆ†ç¦»å’ŒåŸå­æ“ä½œä»¥ä¿è¯é«˜å¹¶å‘åœºæ™¯çš„æ­£ç¡®æ€§ã€‚è¯¦ç»†å®ç°ã€ç¤ºä¾‹ä¸éªŒè¯æ–¹æ³•ï¼ˆä¾‹å¦‚ ThreadSanitizerã€å‹åŠ›æµ‹è¯•ã€åŠ é”çº¦å®šï¼‰å·²æ•´ç†è‡³ `docs/architecture/CONCEPTS.md`ï¼Œè¯·åˆ°è¯¥æ–‡æ¡£æŸ¥é˜…å®Œæ•´ç»†èŠ‚ä¸ç¤ºä¾‹ã€‚
```

#### 2. **ä»»åŠ¡ç”³é¢†çš„åŸå­æ€§**

ä¸¤ä¸ªç”³é¢†è€…åŒæ—¶ç”³é¢†åŒä¸€ä¸ªä»»åŠ¡çš„å¹¶å‘ä¿è¯ï¼š

```mermaid
sequenceDiagram
    actor Claimer1 as ç”³é¢†è€… 1
    participant Task as Task å¯¹è±¡
    participant Mutex as ç”³é¢†é”
    actor Claimer2 as ç”³é¢†è€… 2

    par å¹¶å‘æ‰§è¡Œ
        Claimer1->>Mutex: lock() ç”³é¢†ä»»åŠ¡
    and
        Claimer2->>Mutex: lock() ç­‰å¾…...
    end
    
    Note over Claimer1,Mutex: ç”³é¢†è€… 1 è·å¾—é”
    Claimer1->>Task: status()
    Task-->>Claimer1: Published âœ“
    Claimer1->>Task: set_status(Claimed)
    Claimer1->>Task: claimer_id = "Claimer-1"
    Claimer1->>Task: sig_claimed() è§¦å‘ä¿¡å·
    Claimer1->>Mutex: unlock()
    
    Note over Claimer2,Mutex: ç”³é¢†è€… 2 è·å¾—é”
    Claimer2->>Task: status()
    Task-->>Claimer2: Claimed (é Published) âŒ
    Claimer2-->>Claimer2: ç”³é¢†å¤±è´¥
    Claimer2->>Mutex: unlock()
    
    Note over Claimer1,Claimer2: ä¿è¯ï¼šå³ä½¿ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œ<br/>ä¹Ÿåªæœ‰ä¸€ä¸ªèƒ½æˆåŠŸç”³é¢†
```

#### 3. **è¿›åº¦æ›´æ–°çš„é«˜æ•ˆæ€§**

å¤„ç†ä¸­çš„ä»»åŠ¡é¢‘ç¹æ›´æ–°è¿›åº¦çš„ä¼˜åŒ–ï¼š

```mermaid
timeline
    title åŸå­æ“ä½œ vs äº’æ–¥é”æ€§èƒ½å¯¹æ¯”

    section äº’æ–¥é”æ–¹å¼ (ä½æ•ˆ)
    è·å–é” : é”ç«äº‰ (ç­‰å¾…)
    ä¿®æ”¹è¿›åº¦ : æ‰§è¡Œ set_progress()
    è§¦å‘ä¿¡å· : ä¿¡å·è§¦å‘
    é‡Šæ”¾é” : è§£é”

    section åŸå­æ“ä½œ (é«˜æ•ˆ)
    exchange() : æ— é”æ“ä½œ âš¡
    æ£€æŸ¥å˜åŒ– : åˆ¤æ–­æ˜¯å¦æ”¹å˜
    è§¦å‘ä¿¡å· : ä»…åœ¨å˜åŒ–æ—¶è§¦å‘

    section æ€§èƒ½å·®å¼‚
    é«˜é¢‘æ›´æ–°åœºæ™¯ : åŸå­æ“ä½œä¼˜åŠ¿æ˜æ˜¾ ğŸ“ˆ
    ä½é”ç«äº‰åœºæ™¯ : ä¸¤è€…æ€§èƒ½æ¥è¿‘ â‰ˆ
```

| ç‰¹æ€§ | äº’æ–¥é” | åŸå­æ“ä½œ |
|------|-------|--------|
| **åŠ é”å¼€é”€** | æœ‰ ğŸ”’ | æ—  âš¡ |
| **é”ç«äº‰** | é«˜ | ä½ |
| **å†…å­˜åº** | å®Œå…¨åŒæ­¥ | acq_rel ä¿è¯ |
| **é¢‘ç¹æ›´æ–°** | ä½æ•ˆ | é«˜æ•ˆ âœ“ |
| **é«˜åå** | å—é™ | ä¼˜åŠ¿ |

#### 4. **è¯»å†™åˆ†ç¦»çš„é«˜æ•ˆå¹¶å‘è¯»**

Web ç›‘æ§å·¥å…·é¢‘ç¹è¯»å–ã€ç”³é¢†è€…å®æ—¶æ›´æ–°çš„å¹¶å‘åœºæ™¯ï¼š

```mermaid
graph TB
    subgraph ReadersGroup["ğŸ“Š å¤šä¸ªè¯»è€…ï¼ˆå¹¶å‘ï¼‰"]
        Reader1["WebUI ç›‘æ§<br/>è¯»å…ƒæ•°æ®"]
        Reader2["æ—¥å¿—ç³»ç»Ÿ<br/>è¯»çŠ¶æ€"]
        Reader3["ç»Ÿè®¡ç»„ä»¶<br/>è¯»è¿›åº¦"]
    end
    
    subgraph Mutex["ğŸ” shared_mutex"]
        SharedLock["è¯»é” (å…±äº«)<br/>å…è®¸å¤šä¸ªè¯»è€…"]
        WriteLock["å†™é” (æ’ä»–)<br/>é˜»æ­¢è¯»è€…"]
    end
    
    subgraph WritersGroup["âœï¸ å†™è€…ï¼ˆæ’ä»–ï¼‰"]
        Writer1["ç”³é¢†è€…æ›´æ–°<br/>å…ƒæ•°æ®"]
    end
    
    ReadersGroup -->|è·å–å…±äº«é”| SharedLock
    WritersGroup -->|è·å–ç‹¬å é”| WriteLock
    SharedLock -.->|ä¸é˜»æ­¢å…¶ä»–è¯»è€…| ReadersGroup
    WriteLock -->|é˜»æ­¢è¯»è€…| ReadersGroup
    
    style Mutex fill:#ff9999
    style SharedLock fill:#99cc99
    style WriteLock fill:#ffcc99
```

**å¹¶å‘æ€§èƒ½å¯¹æ¯”ï¼š**

| åœºæ™¯ | äº’æ–¥é” | shared_mutex |
|------|-------|-------------|
| **è¯» + è¯»** | âŒ äº’æ–¥ | âœ“ å¹¶å‘ ğŸš€ |
| **è¯» + å†™** | âŒ äº’æ–¥ | âŒ äº’æ–¥ |
| **å†™ + å†™** | âŒ äº’æ–¥ | âŒ äº’æ–¥ |
| **è¯»å¤šå†™å°‘** | ä½æ•ˆ | é«˜æ•ˆ |

### çº¿ç¨‹å®‰å…¨çš„æœ€ä½³å®è·µ

#### 1. **ä»»åŠ¡å®šä¹‰æ—¶çš„çº¿ç¨‹å®‰å…¨**

```mermaid
flowchart LR
    Start["task_builder()"] --> Handler["å®šä¹‰ handler Lambda"]
    
    Handler --> CheckShared{"è®¿é—®<br/>å…±äº«èµ„æº?"}
    
    CheckShared -->|å¦| Safe["âœ“ å®‰å…¨<br/>æ— éœ€åŠ é”"]
    CheckShared -->|æ˜¯| Lock["æ·»åŠ äº’æ–¥é”<br/>ä¿æŠ¤è®¿é—®"]
    
    Lock --> TaskCall["è°ƒç”¨ Task æ–¹æ³•<br/>set_progress()"]
    Safe --> TaskCall
    
    TaskCall --> SafeNow["âœ“ çº¿ç¨‹å®‰å…¨<br/>Task å†…éƒ¨<br/>æœ‰é”ä¿æŠ¤"]
    
    SafeNow --> Result["è¿”å› TaskResult"]
    
    style Start fill:#e1f5ff
    style Safe fill:#c8e6c9
    style SafeNow fill:#c8e6c9
    style Lock fill:#fff9c4
    style Result fill:#f0f4c3
```

#### 2. **ä¿¡å·æ§½çš„çº¿ç¨‹å®‰å…¨ä½¿ç”¨**

```mermaid
graph TD
    A["ä¿¡å·æ§½è¿æ¥"] --> B{"æ§½å‡½æ•°<br/>åšä»€ä¹ˆ?"}
    
    B -->|è®¿é—®å…±äº«èµ„æº| C["âŒ ç›´æ¥è®¿é—®"]
    B -->|æ›´æ–° UI| D["âŒ ç›´æ¥æ›´æ–° UI"]
    B -->|ç®€å•æ“ä½œ| E["âœ“ å®‰å…¨"]
    
    C --> C1["æ·»åŠ äº’æ–¥é”<br/>ä¿æŠ¤è®¿é—®"]
    D --> D1["æ¨é€åˆ° UI çº¿ç¨‹<br/>å¼‚æ­¥å¤„ç†"]
    
    C1 --> Result["âœ“ å®‰å…¨æ‰§è¡Œ"]
    D1 --> Result
    E --> Result
    
    style A fill:#e3f2fd
    style C fill:#ffcdd2
    style D fill:#ffcdd2
    style E fill:#c8e6c9
    style Result fill:#f0f4c3
```

#### 3. **ç”³é¢†è€…å¹¶å‘å¤„ç†ä»»åŠ¡**

```mermaid
graph TB
    subgraph Threads["å¤šä¸ªå·¥ä½œçº¿ç¨‹"]
        T1["çº¿ç¨‹ 1<br/>Worker-0"]
        T2["çº¿ç¨‹ 2<br/>Worker-1"]
        T3["çº¿ç¨‹ 3<br/>Worker-2"]
        T4["çº¿ç¨‹ 4<br/>Worker-3"]
    end
    
    subgraph Platform["TaskPlatform<br/>çº¿ç¨‹å®‰å…¨"]
        Q["ä¼˜å…ˆçº§é˜Ÿåˆ—<br/>äº’æ–¥é”ä¿æŠ¤"]
        C["ç”³é¢†è€…é›†åˆ<br/>shared_mutex"]
    end
    
    subgraph Tasks["ä»»åŠ¡å¯¹è±¡<br/>åŸå­æ“ä½œ"]
        TK["çŠ¶æ€ã€è¿›åº¦<br/>çº¿ç¨‹å®‰å…¨"]
    end
    
    T1 -->|try_get_next| Q
    T2 -->|claim_task| C
    T3 -->|execute_task| TK
    T4 -->|complete_task| C
    
    style Threads fill:#e8f5e9
    style Platform fill:#fff3e0
    style Tasks fill:#f3e5f5
```

### æ€§èƒ½è€ƒè™‘

| åœºæ™¯ | åŒæ­¥æ–¹å¼ | åŸå›  | æ€§èƒ½å½±å“ |
|------|--------|------|--------|
| çŠ¶æ€è¯»å– | åŸå­æ“ä½œ | `load()` æ— éœ€åŠ é” | å¾ˆå° |
| çŠ¶æ€ä¿®æ”¹ | äº’æ–¥é” | éœ€è¦éªŒè¯è½¬æ¢æœ‰æ•ˆæ€§ | ä¸­ç­‰ |
| è¿›åº¦æ›´æ–° | åŸå­æ“ä½œ | `exchange()` é¢‘ç¹è°ƒç”¨ | å¾ˆå° |
| å…ƒæ•°æ®è¯»å– | å…±äº«é” | å…è®¸å¤šä¸ªè¯»è€… | å¾ˆå° |
| å…ƒæ•°æ®ä¿®æ”¹ | ç‹¬å é” | æ’ä»–æ€§å†™å…¥ | ä¸­ç­‰ |
| ä»»åŠ¡æŸ¥è¯¢ | å…±äº«é” | åªè¯»æ“ä½œ | å¾ˆå° |
| ä»»åŠ¡ç”³é¢† | äº’æ–¥é” | å¿…é¡»æ˜¯åŸå­æ“ä½œ | ä¸­ç­‰ |
| ä¼˜å…ˆçº§é˜Ÿåˆ— | äº’æ–¥é” | å †æ“ä½œéœ€è¦äº’æ–¥ | ä¸­ç­‰ |

### æ½œåœ¨çš„æ­»é”é¿å…

```mermaid
graph TD
    subgraph Unsafe["âŒ å±é™©ï¼šå¯èƒ½æ­»é”"]
        Thread1["çº¿ç¨‹ A"]
        Thread2["çº¿ç¨‹ B"]
        A["è·å–é” A"]
        B["è·å–é” B"]
        AA["ç­‰å¾…é” B"]
        BB["ç­‰å¾…é” A"]
        
        Thread1 --> A
        Thread2 --> B
        A --> AA
        B --> BB
        AA -.->|æ­»é”| BB
    end
    
    subgraph Safe["âœ“ å®‰å…¨ï¼šä¸€è‡´åŠ é”é¡ºåº"]
        Thread3["çº¿ç¨‹ A"]
        Thread4["çº¿ç¨‹ B"]
        C["è·å–é” A"]
        D["è·å–é” B"]
        CC["é‡Šæ”¾é” B"]
        DD["è·å–é” A"]
        
        Thread3 --> C
        Thread4 -->|ç­‰å¾…é” A| DD
        C --> D
        D --> CC
        CC -.->|æˆåŠŸ| DD
    end
    
    style Unsafe fill:#ffcdd2
    style Safe fill:#c8e6c9
    style AA fill:#ef5350
    style BB fill:#ef5350
```

**åŠ é”é¡ºåºçº¦å®šï¼š**
1. æ€»æ˜¯å…ˆåŠ  `platform_mutex`
2. å†åŠ  `task_mutex`  
3. æœ€ååŠ  `data_mutex`

### å»ºè®®çš„éªŒè¯æ–¹å¼

```mermaid
graph LR
    Start["çº¿ç¨‹å®‰å…¨<br/>éªŒè¯"] --> Tools["é€‰æ‹©éªŒè¯æ–¹å¼"]
    
    Tools --> TSan["ThreadSanitizer<br/>ğŸ” æ£€æµ‹ç«äº‰æ¡ä»¶"]
    Tools --> Stress["å‹åŠ›æµ‹è¯•<br/>âš¡ é•¿æ—¶é—´è¿è¡Œ"]
    Tools --> CI["æŒç»­é›†æˆ<br/>ğŸ”„ è‡ªåŠ¨éªŒè¯"]
    
    TSan --> TCmd["g++ -fsanitize=thread<br/>-g program.cpp"]
    Stress --> SCmd["åˆ›å»º 10 çº¿ç¨‹<br/>å¹¶å‘æ“ä½œ"]
    CI --> CCmd["GitHub Actions<br/>å®šæ—¶è¿è¡Œ"]
    
    TCmd --> TCover["è¦†ç›–æ•°æ®ç«äº‰<br/>å†…å­˜å®‰å…¨é—®é¢˜"]
    SCmd --> SCover["è¦†ç›–æ­»é”<br/>å¹¶å‘åœºæ™¯"]
    CCmd --> CCover["è¦†ç›–å›å½’é—®é¢˜<br/>é•¿æœŸç¨³å®šæ€§"]
    
    TCover --> Result["âœ“ çº¿ç¨‹å®‰å…¨<br/>éªŒè¯å®Œæˆ"]
    SCover --> Result
    CCover --> Result
    
    style Start fill:#e3f2fd
    style Tools fill:#fff3e0
    style Result fill:#c8e6c9
    style TSan fill:#f3e5f5
    style Stress fill:#fce4ec
    style CI fill:#e0f2f1
```

**éªŒè¯å·¥å…·è¯¦è§£ï¼š**

| å·¥å…· | ä½œç”¨ | æ£€æµ‹é¡¹ | è¦†ç›–ç‡ |
|------|------|--------|--------|
| **ThreadSanitizer** | åŠ¨æ€æ£€æµ‹ | ç«äº‰æ¡ä»¶ã€æ­»é” | é«˜ âœ“ |
| **å‹åŠ›æµ‹è¯•** | é•¿æœŸè¿è¡Œ | éšè—ç«äº‰ã€èµ„æºæ³„æ¼ | ä¸­ç­‰ |
| **StaticAnalyzer** | é™æ€åˆ†æ | æ˜æ˜¾é—®é¢˜ | ä½ |
| **ä»£ç å®¡æŸ¥** | äººå·¥æ£€æŸ¥ | é€»è¾‘é—®é¢˜ | é«˜ |

### çº¿ç¨‹å®‰å…¨æ€»ä½“æ¶æ„

```mermaid
graph TB
    subgraph User["ç”¨æˆ·ä»£ç "]
        App["åº”ç”¨ç¨‹åº"]
    end
    
    subgraph Library["xswl-youdidit åº“"]
        subgraph Task["Task ä»»åŠ¡å¯¹è±¡"]
            TS["çŠ¶æ€: åŸå­æ“ä½œ"]
            TP["è¿›åº¦: åŸå­æ“ä½œ"]
            TM["å…ƒæ•°æ®: shared_mutex"]
        end
        
        subgraph Claimer["Claimer ç”³é¢†è€…"]
            CS["çŠ¶æ€: åŸå­æ“ä½œ"]
            CT["ä»»åŠ¡åˆ—è¡¨: shared_mutex"]
        end
        
        subgraph Platform["Platform å¹³å°"]
            PQ["ä»»åŠ¡é˜Ÿåˆ—: mutex"]
            PC["ç”³é¢†è€…é›†åˆ: shared_mutex"]
        end
        
        subgraph Signals["ä¿¡å·æ§½ç³»ç»Ÿ"]
            SG["çº¿ç¨‹å®‰å…¨ä¿¡å·"]
        end
    end
    
    App -->|ä½¿ç”¨| Task
    App -->|ä½¿ç”¨| Claimer
    App -->|ä½¿ç”¨| Platform
    
    Task --> SG
    Claimer --> SG
    Platform --> SG
    
    Task -.->|æŸ¥è¯¢| Platform
    Claimer -.->|æ“ä½œ| Task
    
    style User fill:#e1f5ff
    style Library fill:#f5f5f5
    style Task fill:#fff9c4
    style Claimer fill:#f0f4c3
    style Platform fill:#ffccbc
    style Signals fill:#c8e6c9
```

## ğŸ” ä¿¡å·æ§½æœºåˆ¶ï¼ˆç®€è¦ï¼‰

äº‹ä»¶é©±åŠ¨ä½¿ç”¨ `xswl-signals` æä¾›ç±»å‹å®‰å…¨ä¸çº¿ç¨‹å®‰å…¨çš„ä¿¡å·/æ§½æœºåˆ¶ã€‚æœ‰å…³ç”¨æ³•ç¤ºä¾‹ã€ä¼˜å…ˆçº§ä¸åŒæ­¥/å¼‚æ­¥è¯­ä¹‰çš„è¯¦ç»†è¯´æ˜å·²ç§»è‡³ `docs/architecture/CONCEPTS.md`ï¼Œè¯·åœ¨é‚£é‡ŒæŸ¥çœ‹â€œä¿¡å·è¯­ä¹‰â€å’Œç¤ºä¾‹ç« èŠ‚ã€‚

### ä½¿ç”¨æ¨¡å¼

```cpp
// æ¨¡å¼ 1ï¼šLambda è¿æ¥ï¼ˆæœ€å¸¸ç”¨ï¼‰
task->sig_status_changed().connect([](TaskStatus status) {
    std::cout << "Task status: " << status.name() << std::endl;
});

// æ¨¡å¼ 2ï¼šæˆå‘˜å‡½æ•°è¿æ¥ï¼ˆè‡ªåŠ¨ç”Ÿå‘½å‘¨æœŸè¿½è¸ªï¼‰
auto handler = std::make_shared<EventHandler>();
task->sig_completed().connect(handler, &EventHandler::on_task_complete);

// æ¨¡å¼ 3ï¼šä¼˜å…ˆçº§è°ƒåº¦
claimer->sig_progress_updated().connect([](const TaskId &id, int progress) {
    std::cout << "Progress: " << progress << "%" << std::endl;
}, 100);  // ä¼˜å…ˆçº§ä¸º 100

// æ¨¡å¼ 4ï¼šå•æ¬¡æ‰§è¡Œ
task->sig_published().connect_once([](const TaskId &id) {
    std::cout << "Task published first time" << std::endl;
});

// æ¨¡å¼ 5ï¼šè¿æ¥ç®¡ç†ï¼ˆRAII é£æ ¼ï¼‰
{
    xswl::scoped_connection_t conn = task->sig_status_changed().connect([](TaskStatus status) {
        std::cout << "Inside scope" << std::endl;
    });
    
    task->set_status(TaskStatus::Processing);  // è§¦å‘ä¿¡å·
}  // conn ææ„ï¼Œè‡ªåŠ¨æ–­å¼€è¿æ¥

task->set_status(TaskStatus::Completed);  // ä¸ä¼šè§¦å‘ä¹‹å‰çš„å›è°ƒ

// æ¨¡å¼ 6ï¼šæ‰¹é‡ç®¡ç†ï¼ˆè¿æ¥ç»„ï¼‰
xswl::connection_group_t conns;
conns += task->sig_status_changed().connect([](TaskStatus status) { /* ... */ });
conns += task->sig_progress_updated().connect([](int progress) { /* ... */ });

conns.disconnect_all();  // ä¸€æ¬¡æ€§æ–­å¼€æ‰€æœ‰è¿æ¥
```

### ä¿¡å·åˆ—è¡¨

| å¯¹è±¡ | ä¿¡å·å | å‚æ•° | è§¦å‘æ—¶æœº |
|------|--------|------|---------|
| **Task** | `sig_status_changed()` | `TaskStatus` | ä»»åŠ¡çŠ¶æ€å˜åŒ– |
| | `sig_progress_updated()` | `int` | è¿›åº¦æ›´æ–° |
| | `sig_published()` | `TaskId` | ä»»åŠ¡å‘å¸ƒ |
| | `sig_claimed()` | `TaskId, string` | ä»»åŠ¡è¢«ç”³é¢† |
| | `sig_started()` | `TaskId` | å¼€å§‹å¤„ç† |
| | `sig_completed()` | `TaskId, TaskResult` | å¤„ç†å®Œæˆ |
| | `sig_failed()` | `TaskId, Error` | å¤„ç†å¤±è´¥ |
| | `sig_priority_changed()` | `int, int` | ä¼˜å…ˆçº§å˜åŒ– (æ—§å€¼, æ–°å€¼) |
| **Claimer** | `sig_task_assigned()` | `shared_ptr<Task>` | ä»»åŠ¡åˆ†æ´¾ç»™ç”³é¢†è€… |
| | `sig_task_started()` | `shared_ptr<Task>` | ç”³é¢†è€…å¼€å§‹ä»»åŠ¡ |
| | `sig_progress_updated()` | `TaskId, int` | ä»»åŠ¡è¿›åº¦æ›´æ–° |
| | `sig_task_completed()` | `shared_ptr<Task>, TaskResult` | ä»»åŠ¡å®Œæˆ |
| | `sig_task_failed()` | `shared_ptr<Task>, Error` | ä»»åŠ¡å¤±è´¥ |
| | `sig_task_abandoned()` | `shared_ptr<Task>, string` | ä»»åŠ¡æ”¾å¼ƒ |
| | `sig_status_changed()` | `ClaimerState` | ç”³é¢†è€…çŠ¶æ€å˜åŒ–ï¼ˆä¼ é€’ `ClaimerState`ï¼ŒåŒ…å« online/accepting_new_tasks/active/max_concurrentï¼‰ |
| **TaskPlatform** | `sig_task_published()` | `shared_ptr<Task>` | ä»»åŠ¡å‘å¸ƒåˆ°å¹³å° |
| | `sig_task_claimed()` | `shared_ptr<Task>` | ä»»åŠ¡è¢«ç”³é¢† |
| | `sig_task_started()` | `shared_ptr<Task>` | ä»»åŠ¡å¼€å§‹å¤„ç† |
| | `sig_task_completed()` | `shared_ptr<Task>, TaskResult` | ä»»åŠ¡å®Œæˆ |
| | `sig_task_failed()` | `shared_ptr<Task>, string` | ä»»åŠ¡å¤±è´¥ |
| | `sig_task_cancelled()` | `shared_ptr<Task>` | ä»»åŠ¡è¢«å–æ¶ˆ |
| | `sig_claimer_registered()` | `shared_ptr<Claimer>` | ç”³é¢†è€…æ³¨å†Œ |
| | `sig_claimer_unregistered()` | `string` | ç”³é¢†è€…æ³¨é”€ |

> **æ³¨æ„**ï¼šè¡¨æ ¼ä¸­ `shared_ptr<T>` æ˜¯ `const std::shared_ptr<T>&` çš„ç®€å†™ã€‚
>
> **ä¿¡å·ä½¿ç”¨å»ºè®®ï¼ˆç”Ÿå‘½å‘¨æœŸä¸å®‰å…¨ï¼‰**ï¼š
> - **ä¼˜å…ˆä½¿ç”¨** `connect(const std::shared_ptr<Obj>&, &Obj::member)`ï¼Œåº“ä¼šä½¿ç”¨å¼±å¼•ç”¨è‡ªåŠ¨è·³è¿‡å·²é”€æ¯å¯¹è±¡ã€‚
> - é¿å…å°†è£¸æŒ‡é’ˆæˆ–å¯¹å±€éƒ¨å˜é‡çš„å¼•ç”¨ç›´æ¥ä¼ ç»™ `connect(...)`ï¼Œé™¤éä½ èƒ½**ä¿è¯**å¯¹è±¡åœ¨ä¿¡å·å¯èƒ½å‘å°„æœŸé—´å§‹ç»ˆå­˜æ´»ã€‚
> - å¯¹äºçŸ­æœŸè¿æ¥ï¼Œä½¿ç”¨ `xswl::scoped_connection_t` æˆ–ä¿å­˜ `connection_t` å¹¶åœ¨ææ„æ—¶ `disconnect()` æ¥è‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸã€‚
> - ç¤ºä¾‹ `examples/signals_usage.cpp` å·²æ›´æ–°ä¸ºæ¨èçš„ `shared_ptr` æ¨¡å¼ä»¥ç¤ºèŒƒå®‰å…¨ç”¨æ³•ã€‚

## ğŸ” ç›‘æ§ä¸å¯è§†åŒ–

xswl-youdidit æä¾›å®Œæ•´çš„ Web ç›‘æ§ç³»ç»Ÿï¼Œæ”¯æŒå®æ—¶ä»ªè¡¨æ¿ã€äº‹ä»¶æ—¥å¿—ã€æ—¶é—´å›æ”¾å’Œæ€§èƒ½åˆ†æã€‚

> **è¯¦ç»†æ–‡æ¡£**ï¼š
> - [æ–‡æ¡£æ€»è§ˆ](docs/README.md) - ä»“åº“æ–‡æ¡£ç´¢å¼•ä¸å¿«é€Ÿå¯¼èˆªï¼ˆä¸­æ–‡ï¼‰
> - [Web ç›‘æ§ç³»ç»Ÿè®¾è®¡æ–‡æ¡£](docs/web/WEB_MONITORING.md) - æ¶æ„è®¾è®¡ã€éƒ¨ç½²æ¨¡å¼ã€è·¨è¿›ç¨‹é€šä¿¡
> - [Web API æ–‡æ¡£](docs/web/WEB_API.md) - C++ API å’Œ HTTP REST API å®Œæ•´å‚è€ƒ

### æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| **å®æ—¶ä»ªè¡¨æ¿** | Web UI å±•ç¤ºä»»åŠ¡çŠ¶æ€ã€ç”³é¢†è€…çŠ¶æ€ã€ç³»ç»ŸæŒ‡æ ‡ |
| **äº‹ä»¶æ—¥å¿—** | è®°å½•æ‰€æœ‰ç³»ç»Ÿäº‹ä»¶ï¼Œæ”¯æŒæŸ¥è¯¢å’Œå¯¼å‡º |
| **æ—¶é—´å›æ”¾** | æŸ¥çœ‹ä»»æ„æ—¶åˆ»çš„ç³»ç»ŸçŠ¶æ€ï¼ˆTime Travel Debuggingï¼‰ |
| **æ€§èƒ½åˆ†æ** | ä»»åŠ¡å¤„ç†æ—¶é—´ã€ç”³é¢†è€…æ•ˆç‡ã€ç³»ç»Ÿååé‡åˆ†æ |
| **æ•°æ®å¯¼å‡º** | JSONã€CSV æ ¼å¼å¯¼å‡ºï¼Œæ”¯æŒç”ŸæˆæŠ¥å‘Š |

### è§£è€¦è®¾è®¡

Web ç›‘æ§ç³»ç»Ÿä¸æ ¸å¿ƒä»»åŠ¡è°ƒåº¦å®Œå…¨è§£è€¦ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TaskPlatform   â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚  WebDashboard   â”‚  (å¯é€‰ç»„ä»¶)
â”‚  (æ ¸å¿ƒè°ƒåº¦)      â”‚       â”‚  (ç›‘æ§å¯è§†åŒ–)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **æŒ‰éœ€å¯ç”¨**ï¼šä¸éœ€è¦ç›‘æ§æ—¶é›¶å¼€é”€
- **æ•…éšœéš”ç¦»**ï¼šç›‘æ§å´©æºƒä¸å½±å“æ ¸å¿ƒä¸šåŠ¡
- **çµæ´»éƒ¨ç½²**ï¼šæ”¯æŒåŒè¿›ç¨‹ã€ç‹¬ç«‹è¿›ç¨‹ã€è¿œç¨‹ç›‘æ§

### å¿«é€Ÿå¼€å§‹

```cpp
// åˆ›å»ºå¹³å°
auto platform = std::make_shared<TaskPlatform>();

// åˆ›å»ºç‹¬ç«‹çš„ Web ä»ªè¡¨æ¿
auto dashboard = std::make_shared<WebDashboard>(platform.get());
dashboard->set_update_interval(1000)
         ->set_max_event_history(10000)
         ->start_server(8080);

// è®¿é—® http://localhost:8080 æŸ¥çœ‹ä»ªè¡¨æ¿
std::cout << "Dashboard: http://localhost:8080" << std::endl;

// è·å–å®æ—¶æŒ‡æ ‡
auto metrics = dashboard->get_metrics();
std::cout << "å®Œæˆç‡: " << metrics.task_completion_rate * 100 << "%" << std::endl;

// æ—¶é—´å›æ”¾
auto replay = dashboard->get_time_replay();
auto snapshot = replay->get_snapshot_at(Timestamp::now() - std::chrono::minutes(30));
```

### éƒ¨ç½²æ¨¡å¼

| æ¨¡å¼ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| **åŒè¿›ç¨‹** | Dashboard ä¸ Platform åœ¨åŒä¸€è¿›ç¨‹ | å¼€å‘ç¯å¢ƒã€å°å‹éƒ¨ç½² |
| **ç‹¬ç«‹è¿›ç¨‹** | Dashboard ä½œä¸ºç‹¬ç«‹ç›‘æ§æœåŠ¡ | ç”Ÿäº§ç¯å¢ƒã€æ•…éšœéš”ç¦» |
| **é›†ä¸­ç›‘æ§** | ä¸€ä¸ª Dashboard ç›‘æ§å¤šä¸ª Platform | åˆ†å¸ƒå¼éƒ¨ç½²ã€ç»Ÿä¸€è¿ç»´ |

> è¯¦ç»†çš„éƒ¨ç½²æ¶æ„å’Œè·¨è¿›ç¨‹é€šä¿¡è®¾è®¡è¯·å‚é˜… [Web ç›‘æ§ç³»ç»Ÿè®¾è®¡æ–‡æ¡£](docs/web/WEB_MONITORING.md)

## ğŸ“¦ ä¾èµ–åº“

- **tl::optional** - å¯é€‰å€¼å¤„ç†ï¼Œæ”¯æŒç°ä»£ C++ é£æ ¼çš„å¯é€‰ç±»å‹
- **tl::expected** - ä¼˜é›…çš„é”™è¯¯å¤„ç†ï¼Œæä¾› Result ç±»å‹è¯­ä¹‰
- **xswl-signals** - ä¿¡å·æ§½æœºåˆ¶ï¼Œå®ç°ç±»å‹å®‰å…¨çš„äº‹ä»¶ç³»ç»Ÿ

**å®ç°ç»†èŠ‚ä¸æ‰€ç”¨ C++ ç‰¹æ€§**ï¼šå¼€å‘è€…ç›¸å…³çš„å®ç°ç»†èŠ‚ï¼ˆåŒ…æ‹¬å¸¸ç”¨çš„ C++ ç‰¹æ€§ã€noexcept/Pimpl çº¦å®šç­‰ï¼‰å·²ç§»å…¥ `docs/developer/DEVELOPER_GUIDE.md`ï¼Œè¯·å‰å¾€æŸ¥é˜…æ›´è¯¦å°½çš„è¯´æ˜ä¸å»ºè®®ã€‚

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹ï¼ˆç®€è¦ï¼‰

å¸¸è§ç¤ºä¾‹ä¸å¯å¤åˆ¶ä»£ç å·²ç§»è‡³ `docs/usage.md`ï¼Œå¹¶åœ¨ `examples/` ç›®å½•é™„å¸¦æ¼”ç¤ºç¨‹åºï¼ˆä¾‹å¦‚ `examples/web_demo.cpp`ã€`examples/basic_usage.cpp` ç­‰ï¼‰ã€‚

- è¯¦è§ï¼š`docs/usage.md`ï¼ˆå®Œæ•´ç¤ºä¾‹ï¼‰
- ç¤ºä¾‹ç›®å½•ï¼š`examples/`

---

**Â© 2026 xswl-youdidit Project** | **MIT License**

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦è§ LICENSE æ–‡ä»¶ã€‚

---

**å¼€å‘è€…**: [Wang-Jianwei](https://github.com/Wang-Jianwei)

**æœ€åæ›´æ–°**: 2026-01-27